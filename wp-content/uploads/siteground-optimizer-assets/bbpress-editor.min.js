jQuery(document).ready(function(){if(typeof window.MediumEditor!='undefined'){var a={buttons:['bold','italic','unorderedlist','orderedlist','quote','anchor','pre'],relativeContainer:document.getElementById('whats-new-toolbar'),static:!0,updateOnEmptySelection:!0};jQuery('.bbp_editor_forum_content').length&&(window.forums_medium_forum_editor=[],jQuery('.bbp_editor_forum_content').each(function(d,b){var c=jQuery(b).data('key');window.forums_medium_forum_editor[c]=new window.MediumEditor(b,{placeholder:{text:window.bbpEditorJsStrs.description,hideOnClick:!0},toolbar:a,paste:{forcePlainText:!1,cleanPastedHTML:!0,cleanReplacements:[[new RegExp(/<div/gi),'<p'],[new RegExp(/<\/div/gi),'</p'],[new RegExp(/<h[1-6]/gi),'<b'],[new RegExp(/<\/h[1-6]/gi),'</b']],cleanAttrs:['class','style','dir','id'],cleanTags:['meta','div','main','section','article','aside','button','svg','canvas','figure','input','textarea','select','label','form','table','thead','tfooter','colgroup','col','tr','td','th','dl','dd','center','caption','nav'],unwrapTags:['ul','ol','li']},imageDragging:!1}),window.forums_medium_forum_editor[c].subscribe('editableInput',function(f){var d=jQuery(b).closest('form').find('#bbp_forum_content'),e=window.forums_medium_forum_editor[c].getContent(),a=document.createElement('div');a.innerHTML=e,jQuery(a).find('span.atwho-query').replaceWith(function(){return this.innerText}),jQuery(a).find('img.emoji').each(function(c,a){jQuery(a).addClass('emojioneemoji');var b=jQuery(a).attr('alt');jQuery(a).attr('data-emoji-char',b),jQuery(a).removeClass('emoji')}),jQuery(a).find('img.emojioneemoji').replaceWith(function(){return this.dataset.emojiChar}),d.val(jQuery(a).html())})}),jQuery('body').on('click','.bbp-forum-form #whats-new-toolbar .show-toolbar',function(a){var b,c;a.preventDefault(),b=jQuery(a.currentTarget).closest('.bbp-forum-form').find('.bbp_editor_forum_content').data('key'),c=jQuery(a.currentTarget).closest('.bbp-form').find('.medium-editor-toolbar'),jQuery(a.currentTarget).find('.toolbar-button').toggleClass('active'),jQuery(a.currentTarget).find('.toolbar-button').hasClass('active')?(jQuery(a.currentTarget).attr('data-bp-tooltip',jQuery(a.currentTarget).attr('data-bp-tooltip-hide')),window.forums_medium_forum_editor[b].exportSelection()!==null&&c.addClass('medium-editor-toolbar-active')):(jQuery(a.currentTarget).attr('data-bp-tooltip',jQuery(a.currentTarget).attr('data-bp-tooltip-show')),window.forums_medium_forum_editor[b].exportSelection()===null&&c.removeClass('medium-editor-toolbar-active')),jQuery(window.forums_medium_forum_editor[b].elements[0]).focus(),c.toggleClass('active')})),jQuery('.bbp_editor_reply_content').length&&(window.forums_medium_reply_editor=[],jQuery('.bbp_editor_reply_content').each(function(d,b){var c=jQuery(b).data('key');window.forums_medium_reply_editor[c]=new window.MediumEditor(b,{placeholder:{text:window.bbpEditorJsStrs.type_reply,hideOnClick:!0},toolbar:a,paste:{forcePlainText:!1,cleanPastedHTML:!0,cleanReplacements:[[new RegExp(/<div/gi),'<p'],[new RegExp(/<\/div/gi),'</p'],[new RegExp(/<h[1-6]/gi),'<b'],[new RegExp(/<\/h[1-6]/gi),'</b']],cleanAttrs:['class','style','dir','id'],cleanTags:['meta','div','main','section','article','aside','button','svg','canvas','figure','input','textarea','select','label','form','table','thead','tfooter','colgroup','col','tr','td','th','dl','dd','center','caption','nav'],unwrapTags:['ul','ol','li']},imageDragging:!1}),window.forums_medium_reply_editor[c].subscribe('editableInput',function(){var d=jQuery(b).closest('form').find('#bbp_reply_content'),e=window.forums_medium_reply_editor[c].getContent(),a=document.createElement('div');a.innerHTML=e,jQuery(a).find('span.atwho-query').replaceWith(function(){return this.innerText}),jQuery(a).find('img.emoji').each(function(c,a){jQuery(a).addClass('emojioneemoji');var b=jQuery(a).attr('alt');jQuery(a).attr('data-emoji-char',b),jQuery(a).removeClass('emoji')}),jQuery(a).find('img.emojioneemoji').replaceWith(function(){return this.dataset.emojiChar}),d.val(jQuery(a).html())}),jQuery('body').on('click','.bbp-reply-form #whats-new-toolbar .show-toolbar',function(a){var b,c;a.preventDefault(),b=jQuery(a.currentTarget).closest('.bbp-reply-form').find('.bbp_editor_reply_content').data('key'),c=jQuery(a.currentTarget).closest('.bbp-form').find('.medium-editor-toolbar'),jQuery(a.currentTarget).find('.toolbar-button').toggleClass('active'),jQuery(a.currentTarget).find('.toolbar-button').hasClass('active')?(jQuery(a.currentTarget).attr('data-bp-tooltip',jQuery(a.currentTarget).attr('data-bp-tooltip-hide')),window.forums_medium_reply_editor[b].exportSelection()!==null&&c.addClass('medium-editor-toolbar-active')):(jQuery(a.currentTarget).attr('data-bp-tooltip',jQuery(a.currentTarget).attr('data-bp-tooltip-show')),window.forums_medium_reply_editor[b].exportSelection()===null&&c.removeClass('medium-editor-toolbar-active')),jQuery(window.forums_medium_reply_editor[b].elements[0]).focus(),c.toggleClass('active')})})),jQuery('.bbp_editor_topic_content').length&&(window.forums_medium_topic_editor=[],jQuery('.bbp_editor_topic_content').each(function(d,b){var c=jQuery(b).data('key');window.forums_medium_topic_editor[c]=new window.MediumEditor(b,{placeholder:{text:window.bbpEditorJsStrs.type_topic,hideOnClick:!0},toolbar:a,paste:{forcePlainText:!1,cleanPastedHTML:!0,cleanReplacements:[[new RegExp(/<div/gi),'<p'],[new RegExp(/<\/div/gi),'</p'],[new RegExp(/<h[1-6]/gi),'<b'],[new RegExp(/<\/h[1-6]/gi),'</b']],cleanAttrs:['class','style','dir','id'],cleanTags:['meta','div','main','section','article','aside','button','svg','canvas','figure','input','textarea','select','label','form','table','thead','tfooter','colgroup','col','tr','td','th','dl','dd','center','caption','nav'],unwrapTags:['ul','ol','li']},imageDragging:!1}),window.forums_medium_topic_editor[c].subscribe('editableInput',function(){var d,e,a;jQuery(b).closest('form').find('#bbp_topic_content').val(window.forums_medium_topic_editor[c].getContent()),d=jQuery(b).closest('form').find('#bbp_topic_content'),e=window.forums_medium_topic_editor[c].getContent(),a=document.createElement('div'),a.innerHTML=e,jQuery(a).find('span.atwho-query').replaceWith(function(){return this.innerText}),jQuery(a).find('img.emoji').each(function(c,a){jQuery(a).addClass('emojioneemoji');var b=jQuery(a).attr('alt');jQuery(a).attr('data-emoji-char',b),jQuery(a).removeClass('emoji')}),jQuery(a).find('img.emojioneemoji').replaceWith(function(){return this.dataset.emojiChar}),d.val(jQuery(a).html())}),jQuery('body').on('click','.bbp-topic-form #whats-new-toolbar .show-toolbar',function(a){var b,c;a.preventDefault(),b=jQuery(a.currentTarget).closest('.bbp-topic-form').find('.bbp_editor_topic_content').data('key'),c=jQuery(a.currentTarget).closest('.bbp-form').find('.medium-editor-toolbar'),jQuery(a.currentTarget).find('.toolbar-button').toggleClass('active'),jQuery(a.currentTarget).find('.toolbar-button').hasClass('active')?(jQuery(a.currentTarget).attr('data-bp-tooltip',jQuery(a.currentTarget).attr('data-bp-tooltip-hide')),window.forums_medium_topic_editor[b].exportSelection()!==null&&c.addClass('medium-editor-toolbar-active')):(jQuery(a.currentTarget).attr('data-bp-tooltip',jQuery(a.currentTarget).attr('data-bp-tooltip-show')),window.forums_medium_topic_editor[b].exportSelection()===null&&c.removeClass('medium-editor-toolbar-active')),jQuery(window.forums_medium_topic_editor[b].elements[0]).focus(),c.toggleClass('active')})}))}typeof edButtons!='undefined'&&(edButtons[110]=new QTags.TagButton('code','code','`','`','c'),QTags._buttonsInit()),jQuery('#bbp_topic_title').bind('keydown.editor-focus',function(a){if(a.which!==9)return;if(!a.ctrlKey&&!a.altKey&&!a.shiftKey){if(typeof tinymce!='undefined')if(tinymce.activeEditor.isHidden())jQuery('textarea.bbp-the-content').focus();else{var b=tinymce.activeEditor.editorContainer;jQuery('#'+b+' td.mceToolbar > a').focus()}else jQuery('textarea.bbp-the-content').focus();a.preventDefault()}}),jQuery('#bbp_topic_tags').bind('keydown.editor-focus',function(a){if(a.which!==9)return;if(a.shiftKey&&!a.ctrlKey&&!a.altKey){if(typeof tinymce!='undefined')if(tinymce.activeEditor.isHidden())jQuery('textarea.bbp-the-content').focus();else{var b=tinymce.activeEditor.editorContainer;jQuery('#'+b+' td.mceToolbar > a').focus()}else jQuery('textarea.bbp-the-content').focus();a.preventDefault()}})})